html
  head
    script(src="https://gmousse.github.io/dataframe-js/dist/dataframe.min.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/6.2.2/math.min.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.js")
    script(src="data:;base64,ZnVuY3Rpb24gc2VxX2J5KGZyb20sIHRvLCBieSA9IDEpIHsKCWxldCB4ID0gW107CiAgICBmb3IgKGkgPSAwOyBmcm9tICsgaSAqIGJ5IDw9IHRvOyBpKyspIHsKCQl4LnB1c2goZnJvbSArIGkgKiBieSk7Cgl9CglyZXR1cm4geDsKfQoKZnVuY3Rpb24gYygpIHsKICAgIHZhciB4ID0gW107CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3VtZW50c1tpXSkpIHsKICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBvZiBhcmd1bWVudHNbaV0pIHsKICAgICAgICAgICAgICAgIHgucHVzaChpdGVtKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHgucHVzaChhcmd1bWVudHNbaV0pOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiB4Owp9CgpmdW5jdGlvbiBtYXRyaXgoeCwgbnJvdywgbmNvbCwgYnlyb3cgPSBmYWxzZSkgewogICAgaWYgKGJ5cm93KSB7CiAgICAgICAgcmV0dXJuIG1hdGgudHJhbnNwb3NlKG1hdGgubWF0cml4KHgpLnJlc2hhcGUoW25jb2wsIG5yb3ddKSk7CiAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBtYXRoLm1hdHJpeCh4KS5yZXNoYXBlKFtucm93LCBuY29sXSk7CiAgICB9Cn0KCmZ1bmN0aW9uIGxpc3Qoa2V5LCB2YWx1ZSkgewogICAgeCA9IHt9OwogICAgZm9yICh2YXIgaW5kID0gMDsgaW5kIDwga2V5Lmxlbmd0aDsgaW5kKyspIHsKICAgICAgICB4W2tleVtpbmRdXSA9IHZhbHVlW2luZF07CiAgICB9CiAgICByZXR1cm4geDsKfQoKCmZ1bmN0aW9uIHByaW50KHgpIHsKICAgIGlmICh4IGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICByZXR1cm4gcHJpbnRBcnJheSh4KTsKICAgIH0KCiAgICBpZiAoeCBpbnN0YW5jZW9mIG1hdGguTWF0cml4KSB7CiAgICAgICAgcmV0dXJuIHByaW50KHguX2RhdGEpOwogICAgfQoKICAgIGlmICh4IGluc3RhbmNlb2YgZGZqcy5EYXRhRnJhbWUpIHsKICAgICAgICByZXR1cm4geC5zaG93KCk7CiAgICB9CgogICAgY29uc29sZS5sb2coeCk7Cn0KCgpmdW5jdGlvbiBwcmludEFycmF5KHgpIHsKICAgIGZ1bmN0aW9uIGlzTmVzdGVkQXJyYXkoeCkgeyByZXR1cm4gQXJyYXkuaXNBcnJheSh4WzBdKTsgfQogICAgZnVuY3Rpb24gYWRkU3BhY2UoeCkgICAgICB7IHJldHVybiAiICAgICIgKyB4OyB9CiAgICBmdW5jdGlvbiBwYXN0ZShzMSwgczIpICAgIHsgcmV0dXJuIFN0cmluZyhzMSkgKyBTdHJpbmcoczIpOyB9CgogICAgaWYgKGlzTmVzdGVkQXJyYXkoeCkpIHsKICAgICAgICB4Lm1hcChwcmludCk7CiAgICB9IGVsc2UgewogICAgICAgIGxldCBsaW5lID0gYWRkU3BhY2UoeC5yZWR1Y2UoKHMxLCBzMikgPT4gcGFzdGUoczEsIGFkZFNwYWNlKHMyKSkpKTsKICAgICAgICBjb25zb2xlLmxvZyhsaW5lKTsKICAgIH0KfQo=")
    script(src="./index.js")
  body
    div(id="p5_canvas")
